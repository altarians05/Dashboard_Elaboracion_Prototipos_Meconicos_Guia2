<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo 4: Contextualización - Modelado Digital</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- ESTILOS GLOBALES ESTANDARIZADOS --- */
        :root { 
            --sena-green: #39A900; 
            --sena-blue: #00324D; 
            --sena-orange: #FF6C00; 
            --bg-body: #F4F6F9; 
            --bg-card: #FFFFFF; 
            --text-gray: #59667a; 
            --shadow: 0 4px 20px rgba(0,0,0,0.05); 
            --radius: 12px; 
            --menu-width: 280px; 
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Roboto', sans-serif; background-color: var(--bg-body); color: var(--sena-blue); line-height: 1.6; min-height: 100vh; display: flex; flex-direction: column; }
        
        /* HEADER */
       header { 
    background-color: var(--bg-card); 
    padding: 1rem 2rem; 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
    z-index: 100; 
    position: sticky; 
    top: 0; 
}

/* --- NUEVO ESTILO PARA EL TÍTULO DEL HEADER --- */
.header-title {
    font-family: 'Montserrat', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    color: var(--sena-blue);
    text-align: center;
    flex: 1; /* Esto hace que ocupe el espacio central y empuje los logos a los lados */
text-transform: uppercase;
    letter-spacing: 1px;
}
        .back-btn { text-decoration: none; color: var(--sena-blue); font-weight: bold; display: flex; align-items: center; gap: 10px; transition: color 0.3s; }
        .back-btn:hover { color: var(--sena-orange); }

        /* LAYOUT */
        .main-layout { display: flex; flex: 1; max-width: 1400px; margin: 2rem auto; gap: 2rem; width: 100%; padding: 0 20px; }
        .sidebar { width: var(--menu-width); background: var(--bg-card); border-radius: var(--radius); box-shadow: var(--shadow); padding: 1.5rem; height: fit-content; position: sticky; top: 6rem; }
        .sidebar h3 { font-family: 'Montserrat'; color: var(--sena-green); margin-bottom: 1.5rem; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        .menu-item { display: flex; align-items: center; gap: 12px; padding: 12px 15px; margin-bottom: 8px; border-radius: 8px; cursor: pointer; transition: all 0.3s; color: var(--text-gray); font-weight: 500; position: relative; }
        .menu-item:hover { background: #f0fdf4; color: var(--sena-green); }
        .menu-item.active { background: var(--sena-green); color: white; box-shadow: 0 4px 10px rgba(57, 169, 0, 0.3); }
        .menu-item.completed::after { content: '\f00c'; font-family: "Font Awesome 6 Free"; font-weight: 900; position: absolute; right: 10px; color: var(--sena-green); font-size: 0.8rem;}
        .menu-item.active.completed::after { color: white; }
        .menu-icon-img { width: 24px; height: auto; object-fit: contain; }

        /* CONTENIDO */
        .content-area { flex: 1; background: var(--bg-card); border-radius: var(--radius); box-shadow: var(--shadow); padding: 2.5rem; min-height: 600px; }
        .activity-section { display: none; animation: fadeIn 0.5s ease; }
        .activity-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .section-header h2 { font-family: 'Montserrat'; color: var(--sena-blue); font-size: 1.8rem; margin-bottom: 1rem; border-bottom: 1px solid #eee; padding-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        
        /* COMPONENTES GENERALES */
        .btn-primary { background: var(--sena-orange); color: white; border: none; padding: 12px 25px; border-radius: 50px; cursor: pointer; font-weight: bold; transition: transform 0.2s, box-shadow 0.2s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; box-shadow: 0 4px 0 #c45200; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 0 #c45200; background: #FF6C00; }
        .btn-primary:active { transform: translateY(2px); box-shadow: 0 2px 0 #c45200; }
        
        .btn-download { background: var(--sena-blue); box-shadow: 0 4px 0 #001f30; }
        .btn-download:hover { background: #004466; box-shadow: 0 6px 0 #001f30; }

        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: var(--radius); background: #000; margin: 1.5rem 0; box-shadow: var(--shadow); }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        /* PORTADA */
        .cover-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; align-items: center; }
        .info-box { background: #f8fafc; padding: 20px; border-radius: var(--radius); border-left: 4px solid var(--sena-green); margin-bottom: 15px; }
        .info-box strong { color: var(--sena-blue); display: block; margin-bottom: 5px; }
        .tecnobot-msg { background: #e3f2fd; padding: 15px; border-radius: 15px; position: relative; text-align: center; border: 1px solid #bbdefb; }
        .tecnobot-msg::after { content: ''; position: absolute; bottom: -10px; left: 50%; border-width: 10px; border-style: solid; border-color: #e3f2fd transparent transparent transparent; transform: translateX(-50%); }

        /* TARJETAS INTERACTIVAS (BIOSEGURIDAD & RECOMENDACIONES) */
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .info-card { background: white; padding: 20px; border-radius: var(--radius); border: 1px solid #eee; transition: 0.3s; text-align: center; position: relative; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .info-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .card-icon { font-size: 2.5rem; margin-bottom: 15px; display: block; }
        
        .safety-danger { border-top: 4px solid #e74c3c; } .safety-danger .card-icon { color: #e74c3c; }
        .safety-prohibit { border-top: 4px solid #f39c12; } .safety-prohibit .card-icon { color: #f39c12; }
        .safety-oblig { border-top: 4px solid #3498db; } .safety-oblig .card-icon { color: #3498db; }
        
        /* PASO A PASO TALLER */
        .step-container { display: flex; flex-direction: column; gap: 30px; margin: 30px 0; }
        .step-item { display: flex; gap: 20px; align-items: flex-start; background: #fff; padding: 20px; border-radius: var(--radius); border: 1px solid #eee; }
        .step-number { background: var(--sena-orange); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; font-size: 1.2rem; }
        .step-content img { max-width: 100%; border-radius: 8px; margin-top: 10px; border: 1px solid #ddd; }

        /* JUEGO ORDENAMIENTO */
        .sortable-list { list-style: none; padding: 0; max-width: 600px; margin: 0 auto; }
        .sortable-item { background: #fff; border: 2px solid #ddd; padding: 15px; margin-bottom: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: 0.2s; }
        .sortable-item:hover { border-color: var(--sena-blue); background: #f0f8ff; }
        .sortable-item.correct { background: #d4edda; border-color: #28a745; color: #155724; pointer-events: none; }
        .sortable-item i { color: var(--text-gray); }

        /* REFLEXIÓN */
        .reflection-area textarea { width: 100%; height: 100px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; resize: vertical; margin-bottom: 10px; font-family: inherit; }

        /* OVERLAY CELEBRACIÓN */
        #celebration-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 50, 77, 0.98);
            display: none; flex-direction: column; align-items: center; justify-content: center;
            z-index: 2000; color: white; text-align: center; padding: 20px;
        }
        .badge-anim { 
            width: 300px; max-width: 80vw;
            animation: pulseBadge 2s infinite ease-in-out; 
            margin-bottom: 30px; 
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
        }
        @keyframes pulseBadge {
            0% { transform: scale(1); filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.3)); }
            50% { transform: scale(1.05); filter: drop-shadow(0 0 40px rgba(255, 215, 0, 0.6)); }
            100% { transform: scale(1); filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.3)); }
        }

        @media (max-width: 768px) { 
            .main-layout { flex-direction: column; } 
            .sidebar { width: 100%; position: static; top: 0; }
            .cover-grid { grid-template-columns: 1fr; }
            .step-item { flex-direction: column; }
        }
    </style>
</head>
<body>

    <header>
    <div class="header-left" style="display: flex; align-items: center; gap: 15px;">
        <img src="imagenes/Logos/sena.png" alt="Logo SENA" style="height: 45px;">
        <a href="index.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> Volver al Centro de Comando
        </a>
    </div>

    <h1 class="header-title">Módulo 4: Contextualización</h1>

    <img src="imagenes/Logos/tecnoacademia.jpeg" alt="Logo TecnoAcademia" style="height: 45px;">
</header>

    <div class="main-layout">
        <aside class="sidebar">
            <h3><i class="fas fa-map-signs"></i> Ruta de Aprendizaje</h3>
            
            <div id="menu-1" class="menu-item active" onclick="showSection(1)">
                <img src="imagenes/Insignias/Pin STEAM+/Pin_S.png" class="menu-icon-img" alt="Icon"> Presentación
            </div>
            <div id="menu-2" class="menu-item" onclick="showSection(2)">
                <img src="imagenes/Insignias/Pin STEAM+/Pin_T.png" class="menu-icon-img" alt="Icon"> ¿Qué es FreeCAD?
            </div>
            <div id="menu-3" class="menu-item" onclick="showSection(3)">
                <img src="imagenes/Insignias/Pin STEAM+/Pin_E.png" class="menu-icon-img" alt="Icon"> Bioseguridad
            </div>
            <div id="menu-4" class="menu-item" onclick="showSection(4)">
                <img src="imagenes/Insignias/Pin STEAM+/Pin_A.png" class="menu-icon-img" alt="Icon"> Taller Práctico
            </div>
            <div id="menu-5" class="menu-item" onclick="showSection(5)">
                <img src="imagenes/Insignias/Pin STEAM+/Pin_M.png" class="menu-icon-img" alt="Icon"> Desafío Final
            </div>

            <div id="progress-container" style="margin-top: 20px; background: #eee; height: 10px; border-radius: 5px; overflow: hidden;">
    <div id="progress-bar" style="width: 0%; height: 100%; background: var(--sena-green); transition: width 0.5s;"></div>
</div>
<p style="text-align: center; font-size: 0.8rem; color: var(--text-gray); margin-top: 5px;">
    Progreso: <span id="progress-text">0%</span>
</p>
        </aside>

        <main class="content-area">

            <section id="sec-1" class="activity-section active">
                <div class="section-header">
                    <h2><i class="fas fa-flag"></i> Módulo 4: Contextualización</h2>
                </div>
                
                <div class="cover-grid">
                    <div>
                        <h3 style="color: var(--sena-orange); margin-bottom: 15px;">Identificación de Conocimientos: Modelado Digital</h3>
                        <p style="margin-bottom: 20px;">
                            <strong>¡Hola Maker!</strong> En este módulo daremos el salto del papel a la pantalla. Adéntrate en el modelado digital utilizando el software <strong>FreeCAD</strong>, una herramienta esencial en la ingeniería moderna.
                        </p>

                        <div class="info-box">
                            <strong><i class="fas fa-tools"></i> Técnica Didáctica:</strong> Análisis de caso y demostraciones prácticas.
                        </div>
                        <div class="info-box">
                            <strong><i class="fas fa-clock"></i> Duración:</strong> 6 Horas (4 Presenciales + 2 Desescolarizadas).
                        </div>
                        <div class="info-box">
                            <strong><i class="fas fa-laptop-code"></i> Software:</strong> FreeCAD (Open Source).
                        </div>
                        
                        <div style="margin-top: 25px;">
                            <a href="documentos/Anexos/Anexo_G2_Taller 1_Modelado digital utilizando FREECAD/Anexo_G2_Taller 1_Modelado digital utilizando FREECAD.pdf" target="_blank" class="btn-primary btn-download">
                                <i class="fas fa-file-pdf"></i> Descargar Guía de Taller
                            </a>
                            <button class="btn-primary" onclick="markComplete(1); showSection(2)" style="margin-left: 10px;">
                                Iniciar Módulo <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <div class="tecnobot-msg">
                            <p style="font-size: 0.9rem;">"¡El diseño CAD es el lenguaje que hablan las impresoras 3D! Vamos a aprenderlo."</p>
                        </div>
                        <img src="imagenes/Personajes/tecnoBot/para talleres_Mesa de trabajo 1.png" alt="TecnoBot" style="max-width: 180px; margin-top: 15px; animation: float 3s infinite ease-in-out;">
                    </div>
                </div>
            </section>

            <section id="sec-2" class="activity-section">
                <div class="section-header">
                    <h2><i class="fas fa-cube"></i> ¿Conocías FreeCAD?</h2>
                </div>

                <div style="display: flex; gap: 20px; margin-bottom: 30px; align-items: center; flex-wrap: wrap;">
                    <img src="imagenes/Personajes/Maker/facilitador Tecnologias virtuales.png" alt="Facilitador" style="width: 100px; height: auto;">
                    <p style="flex: 1;">
                        El software <strong>FreeCAD</strong> nos permite digitalizar los bocetos que hemos realizado a mano. Es un modelador paramétrico 3D, lo que significa que puedes diseñar objetos de la vida real de cualquier tamaño. La ingeniería inversa y el diseño de productos son sus especialidades. (Perdomo, R. 2017).
                    </p>
                </div>

                <div class="video-container">
                    <iframe src="https://www.youtube.com/embed/C-78clcBy8M" title="Tutorial FreeCAD" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>

                <div style="background: #e8f5e9; padding: 20px; border-radius: var(--radius); display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                    <div style="flex: 1;">
                        <h3 style="color: var(--sena-green);">Del Boceto al Modelo Digital</h3>
                        <p>Observa la imagen. A la izquierda tenemos el concepto abstracto, y a la derecha, la precisión matemática del CAD. Esto es necesario para prototipar con máquinas CNC o Impresoras 3D.</p>
                    </div>
                    <img src="imagenes/Otros/ModeloDigital.png" alt="Modelo Digital" style="max-width: 250px; border-radius: 8px; border: 2px solid white; box-shadow: var(--shadow);">
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn-primary" onclick="markComplete(2); showSection(3)">Continuar a Seguridad <i class="fas fa-shield-alt"></i></button>
                </div>
            </section>

            <section id="sec-3" class="activity-section">
                <div class="section-header">
                    <h2><i class="fas fa-user-shield"></i> Seguridad y Normas</h2>
                </div>
                
                <p style="margin-bottom: 20px;">Antes de encender los equipos, debemos garantizar un entorno seguro. Identifica las señales:</p>

                <div style="display: flex; gap: 10px; margin-bottom: 20px; justify-content: center;">
                    <button class="btn-primary" style="background: #e74c3c; box-shadow: none;" onclick="document.getElementById('warn-content').style.display='grid'; document.getElementById('proh-content').style.display='none';">Peligros</button>
                    <button class="btn-primary" style="background: #f39c12; box-shadow: none;" onclick="document.getElementById('warn-content').style.display='none'; document.getElementById('proh-content').style.display='grid';">Prohibiciones</button>
                </div>

                <div id="warn-content" class="cards-grid">
                    <div class="info-card safety-danger">
                        <i class="fas fa-bolt card-icon"></i>
                        <h4>Riesgo Eléctrico</h4>
                        <p>Cuidado con cables pelados o conexiones húmedas.</p>
                    </div>
                    <div class="info-card safety-danger">
                        <i class="fas fa-temperature-high card-icon"></i>
                        <h4>Alta Temperatura</h4>
                        <p>Equipos como impresoras 3D pueden quemar al contacto.</p>
                    </div>
                    <div class="info-card safety-danger">
                        <i class="fas fa-cut card-icon"></i>
                        <h4>Elementos Afilados</h4>
                        <p>Herramientas de corte deben manipularse con precaución.</p>
                    </div>
                </div>

                <div id="proh-content" class="cards-grid" style="display: none;">
                    <div class="info-card safety-prohibit">
                        <i class="fas fa-hamburger card-icon"></i>
                        <h4>Prohibido Comer</h4>
                        <p>Los alimentos pueden dañar los equipos de cómputo.</p>
                    </div>
                    <div class="info-card safety-prohibit">
                        <i class="fas fa-running card-icon"></i>
                        <h4>Prohibido Correr</h4>
                        <p>Evita accidentes y caídas en el laboratorio.</p>
                    </div>
                    <div class="info-card safety-oblig">
                        <i class="fas fa-trash card-icon"></i>
                        <h4>Uso de Papeleras</h4>
                        <p>Separa los residuos según el código de colores.</p>
                    </div>
                </div>

                <div style="margin-top: 30px; background: #f0f4f8; padding: 20px; border-radius: var(--radius);">
                    <h3 style="text-align: center; margin-bottom: 15px;"><i class="fas fa-thumbs-up"></i> Buenas Prácticas</h3>
                    <ul style="list-style: none; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <li><i class="fas fa-check-circle" style="color: var(--sena-green);"></i> Ajusta tu silla (Ergonomía).</li>
                        <li><i class="fas fa-check-circle" style="color: var(--sena-green);"></i> Pausas activas cada 2 horas.</li>
                        <li><i class="fas fa-check-circle" style="color: var(--sena-green);"></i> Apaga equipos al terminar.</li>
                        <li><i class="fas fa-check-circle" style="color: var(--sena-green);"></i> Mantén el orden.</li>
                    </ul>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn-primary" onclick="markComplete(3); showSection(4)">Ir al Taller <i class="fas fa-tools"></i></button>
                </div>
            </section>

           <section id="sec-4" class="activity-section">
    <div class="section-header">
        <h2><i class="fas fa-mouse"></i> Taller 1: Modelado en FreeCAD</h2>
    </div>

    <div style="display: flex; flex-direction: column; gap: 20px; margin-bottom: 30px;">
        <div style="display: flex; gap: 20px; align-items: center;">
            <img src="imagenes/Personajes/TecnoBot/Anexo_TecnoAcademia.png" alt="TecnoBot Taller" style="width: 80px;">
            <div style="background: #fff3e0; padding: 15px; border-radius: 10px; border: 1px solid #ffe0b2; width: 100%;">
                <strong>Reto Maker Nivel 2:</strong> Visualiza tus bocetos. Vamos a crear una pieza simple en forma de "U" y darle volumen.
            </div>
        </div>

        <div style="text-align: right;">
            <a href="documentos/Anexos/Anexo_G2_Taller 1_Modelado digital utilizando FREECAD/Anexo_G2_Taller 1_Modelado digital utilizando FREECAD.pdf" 
               target="_blank" 
               class="btn-primary" 
               style="background: #00324D; box-shadow: 0 4px 0 #001a29; font-size: 0.9rem;">
                <i class="fas fa-external-link-alt"></i> Ver Anexo: Diseño Mecánico
            </a>
        </div>
    </div>

                <div class="step-container">
                    <div class="step-item">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Preparación</h4>
                            <p>Abre FreeCAD. Selecciona el banco de trabajo "Part Design".</p>
                            <img src="imagenes/Otros/crearPieza.png" alt="Crear Pieza">
                            <p><small>Clic en "Crear cuerpo" y "Crear croquis".</small></p>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Dibujo del Croquis (2D)</h4>
                            <p>Selecciona el plano XY. Usa la herramienta <strong>Polilínea</strong> para dibujar una forma de U cerrada.</p>
                            <img src="imagenes/Otros/croquisCerrado.png" alt="Croquis Cerrado">
                            <p><small>Asegúrate de que todos los puntos estén conectados (coincidentes).</small></p>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Extrusión (3D)</h4>
                            <p>Cierra el croquis. Usa la herramienta <strong>Pad (Extruir)</strong>.</p>
                            <img src="imagenes/Otros/extrusion.png" alt="Extrusión">
                            <p><small>Define la altura (ej: 50mm) para darle volumen a tu pieza.</small></p>
                        </div>
                    </div>
                </div>

                <div style="background: #f9f9f9; padding: 20px; border-radius: var(--radius); border-left: 5px solid var(--sena-blue);">
                    <h3 style="margin-bottom: 15px;">Reflexión del Proceso</h3>
                    <div class="reflection-area">
                        <label>¿Cómo te pareció el entorno de FreeCAD comparado con dibujar a mano?</label>
                        <textarea placeholder="Escribe tu opinión aquí..."></textarea>
                        
                        <label>¿Qué dificultad encontraste al cerrar el croquis?</label>
                        <textarea placeholder="Describe si tuviste problemas con los puntos rojos..."></textarea>
                    </div>
                    <button class="btn-primary" onclick="alert('¡Reflexión guardada! Preparándote para el desafío final...'); markComplete(4); showSection(5);">Guardar y Continuar</button>
                </div>
            </section>

            <section id="sec-5" class="activity-section">
                <div class="section-header">
                    <h2><i class="fas fa-puzzle-piece"></i> Desafío de Lógica CAD</h2>
                </div>

                <p style="text-align: center; margin-bottom: 20px;">Ordena correctamente los pasos para crear una pieza digital. Haz clic en los recuadros en el orden lógico (del 1 al 4).</p>

                <div id="game-area" style="text-align: center;">
                    <ul class="sortable-list" id="sortable-list">
                        </ul>
                    <p id="game-feedback" style="margin-top: 15px; font-weight: bold; height: 20px;"></p>
                </div>

                <div id="final-congrats" style="display: none; text-align: center; margin-top: 30px;">
                    <h3 style="color: var(--sena-green);">¡Secuencia Correcta!</h3>
                    <p>Has comprendido el flujo de trabajo en Ingeniería Inversa y Diseño.</p>
                    <button class="btn-primary" style="background: var(--sena-green); margin-top: 20px; padding: 15px 40px; font-size: 1.2rem;" onclick="showCelebration()">
                        Finalizar Actividad <i class="fas fa-check-circle"></i>
                    </button>
                </div>
            </section>

        </main>
    </div>

    <div id="celebration-overlay">
        <h1 style="font-family: 'Montserrat'; font-size: 3rem; color: #FFD700; margin-bottom: 20px; text-shadow: 2px 2px 10px rgba(0,0,0,0.5);">¡FELICITACIONES!</h1>
        
        <img src="imagenes/Insignias/Insignias Mohs/02 - Insignias MOHS-Oro.png" class="badge-anim" alt="Insignia de Oro Ganada">
        
        <p style="font-size: 1.5rem; max-width: 700px; margin-bottom: 10px; font-weight: 300;">Has completado el Módulo de Contextualización.</p>
        <p style="font-size: 1.1rem; color: #bdc3c7; margin-bottom: 30px;">Ahora tienes las bases para crear prototipos digitales complejos.</p>
        
        <button class="btn-primary" style="background: white; color: var(--sena-blue); box-shadow: 0 4px 0 #ccc;" onclick="finishModule()">
            Volver al Centro de Comando <i class="fas fa-chevron-right"></i>
        </button>
    </div>

    <script>
        // --- LÓGICA DE NAVEGACIÓN Y PROGRESO ---
        let progress = [false, false, false, false, false]; // 5 Secciones
        const totalSections = 5;

       function showSection(id) {
    // NUEVA LÍNEA: Marcar como completado al entrar a la sección
    markComplete(id); 

    // Actualizar menú sidebar
    document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
    document.getElementById('menu-' + id).classList.add('active');
    
    // Actualizar contenido principal
    document.querySelectorAll('.activity-section').forEach(sec => sec.classList.remove('active'));
    document.getElementById('sec-' + id).classList.add('active');
    
    // Scroll top suave
    window.scrollTo({ top: 0, behavior: 'smooth' });

    // Si entra a la sección final y no ha jugado, iniciar juego
    if(id === 5 && document.getElementById('sortable-list').children.length === 0) {
        initGame();
    }
}

        function markComplete(id) {
            if (!progress[id-1]) {
                progress[id-1] = true;
                document.getElementById('menu-' + id).classList.add('completed');
                updateProgressBar();
            }
        }

        function updateProgressBar() {
    const completedCount = progress.filter(Boolean).length;
    const percent = Math.round((completedCount / totalSections) * 100); // Redondeamos para que se vea limpio
    document.getElementById('progress-bar').style.width = percent + '%';
    document.getElementById('progress-text').textContent = percent + '%'; // Actualiza el número
}

        // --- LÓGICA DEL JUEGO DE ORDENAMIENTO ---
        const correctOrder = [
            "Abrir FreeCAD y Crear Nuevo Archivo",
            "Seleccionar Plano y Crear Croquis (2D)",
            "Acotar (Dar Medidas) y Cerrar Croquis",
            "Usar Herramienta Pad/Extrusión (3D)"
        ];
        
        let currentStep = 0;

        function initGame() {
            const list = document.getElementById('sortable-list');
            list.innerHTML = '';
            
            // Clonar y desordenar
            let items = [...correctOrder].sort(() => Math.random() - 0.5);
            
            items.forEach(text => {
                let li = document.createElement('li');
                li.className = 'sortable-item';
                li.innerHTML = `<i class="far fa-square"></i> ${text}`;
                li.onclick = function() { checkItem(this, text); };
                list.appendChild(li);
            });
        }

        function checkItem(element, text) {
            if (element.classList.contains('correct')) return;

            if (text === correctOrder[currentStep]) {
                // Correcto
                element.classList.add('correct');
                element.innerHTML = `<i class="fas fa-check-square"></i> ${text}`;
                document.getElementById('game-feedback').textContent = "¡Correcto! Siguiente paso...";
                document.getElementById('game-feedback').style.color = "var(--sena-green)";
                currentStep++;

                if (currentStep === correctOrder.length) {
                    document.getElementById('game-feedback').textContent = "";
                    document.getElementById('final-congrats').style.display = 'block';
                    markComplete(5);
                }
            } else {
                // Incorrecto
                element.style.borderColor = "red";
                element.classList.add('shake-anim'); // Podrías agregar animación CSS
                document.getElementById('game-feedback').textContent = "Ese no es el orden lógico. Intenta de nuevo.";
                document.getElementById('game-feedback').style.color = "red";
                setTimeout(() => {
                    element.style.borderColor = "#ddd";
                }, 1000);
            }
        }

        // --- LÓGICA DE FINALIZACIÓN ---
        const storageKey = 'makerCourseState'; 

        function showCelebration() {
            document.getElementById('celebration-overlay').style.display = 'flex';
        }

        function finishModule() {
            // Guardar estado
            const completedModule = 4;
            const nextModule = 5;
            
            let state = JSON.parse(localStorage.getItem(storageKey));
            
            if (state) {
                if (!state.completedModules.includes(completedModule)) {
                    state.completedModules.push(completedModule);
                }
                if (!state.unlockedModules.includes(nextModule)) {
                    state.unlockedModules.push(nextModule);
                }
                localStorage.setItem(storageKey, JSON.stringify(state));
                window.location.href = 'index.html';
            } else {
                // Fallback para pruebas sin index
                alert("Modo prueba: Redirigiendo a index...");
                window.location.href = 'index.html';
            }
        }
	// Inicializar el progreso de la primera sección al cargar la página
        window.onload = () => { markComplete(1); };
    </script>
</body>
</html>